<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>13.1事件流</title>
	</head>
	<body>
		<div id="myDiv">Click Me</div>
		<script>
		//JavaScript与HTML之间的交互是通过事件实现的。
		//事件，就是文档或浏览器窗口中发生时执行相应的代码
		//可以使用侦听器(或处理程序)来预订事件，以便事件发生时执行相应的代码。
		//这种在传统软件工程中被称为观察员模式的模型，支持页面的行为(JavaScript代码)与页面的外观(HTML和CSS代码)之间的松散耦合
		
		//事件最早是在IE3和Netscape Navigator2中出现的，当时是作为分担服务器运算负载的一种手段。
		//在IE4和Navigator4发布时，这两种浏览器都提供了相似但不同的API，这些API并存经过了好几个主要版本。
		//DOM2级规范开始尝试以一种符合逻辑的方式来标准化DOM事件。
		//IE9、Firefox、Opera、Safari和Chrome全都已经实现了"DOM2级事件"模块的核心部分。
		//IE8是最后一个仍然使用其专有事件系统的主要浏览器
		
		//浏览器的事件系统相对比较复杂。
		//尽管所有主要浏览器已经实现了"DOM2级事件"，但这个规范本身并没有涵盖所有事件类型
		//浏览器对象模型(BOM)也支持了一些事件，这些时间与文档对象模型(DOM)事件之间的关系并不十分清晰，因为BOM事件长期没有规范可以遵循(HTML5后来给出了详细的说明)。
		//随着DOM3级的出现，增强后的DOM事件API变得更加繁琐。
		//使用事件有时相对简单，有时则非常复杂，难易程度会因你的需求而不同
		//不过，有关事件的一些核心概念一定要理解的
		
		//13.1 事件流			p345
			//当浏览器发展到第四代时(IE4及Netscape Communicator4),浏览器开发团队遇到了一个很有意思的问题
			//页面的哪一部分会拥有某个特定的时间?要明白这个问题问的是什么，可以想象花在一张纸上的一组同心圆。
			//如果你把手指放在圆心上，那么你的手指指向的不是一个圆，而是纸上的所有圆。
			//两家公司的浏览器开发团队在看待浏览器事件方面还是一致的。
			//如果你单击了某个按钮，他们都任务单击事件不仅仅发生在按钮上。
			//换句话说，在单机按钮的同时，你也单机了按钮的容器元素，甚至也单击了整个页面
			
			//事件流描述的是页面中接收事件的顺序。
			//但有意思的是，IE和Netscape开发团队居然提出了差不多是完全相反的事件流的概念。
			//IE的事件流是事件冒泡流，而Netscape Communicator的事件流是事件捕获流。
			
		//13.1.1 事件冒泡		p346
			//IE的事件流叫做事件冒泡(event bubbling),即事件开始时由最具体的元素(文档中嵌套层次最深得那个节点)接收，然后逐级向上传播较为不具体的节点(文档)。
			
			//如果你单击了页面中的<div>元素，那么这个click事件会按照如下顺序传播:
			//<div> → <body> → <html> → document
			
			//也就是说，click事件首先在<div>元素上发生，而这个元素就是我们单击的元素。
			//然后，click事件沿DOM树向上传播，在每一个节点上都会发生，直至传播到document对象。。
			//事件冒泡的过程如p346图13-1所示
			
			//所有咸蛋浏览器都支持事件冒泡，但在具体实现上还是有一些差别。
			//IE5.5及更早版本中的时间冒泡会跳过<html>元素(从<body>直接跳到document)。
			//IE9、Firefox、Chrome和Safari则将事件一直冒泡到window对象。
			
			
		//13.1.2事件捕获		p346
			//Netscape Communicator团队提出另一种事件流叫做事件捕获(event capturing)。
			//事件捕获的思想是不太具体的节点应该更早接受到事件，而最具体的节点应该最后接收到事件
			//事件捕获的用意在于事件打到预定目标之前捕获它。
			//如果仍以前面的HTML页面作为演示事件捕获的例子，那么单击<div>元素就会以下列顺序触发click事件
			//document → <html> → <body> → <div>
			
			//在事件捕获过程中，document对象首先接受到click事件，然后事件沿DOM树依次向下，一直传播到事件的真实目标，及<div>元素
			//事件捕获的过程如p347图13-2所示
			
			//虽然事件捕获是Netscape Communicator唯一支持的事件流模型，但IE9、Safari、Chrome、Opera和Firefox目前也都支持这种事件流模型。
			//尽管"DOM2级事件"规范要求事件应该从document对象开始传播，但这些浏览器都是从window对象开始捕获事件的
			//由于老版本的浏览器不支持，因此很少有人使用事件捕获。我们也建议读者放心地使用事件冒泡，在有特殊需要时再使用事件捕获
			
		//13.1.3 DOM事件流		p347
			//"DOM2级事件"规定的事件流包括三个阶段:事件捕获阶段、处于目标阶段和事件冒泡阶段。
			//首先发生的是事件捕获，为截获事件提供了机会。
			//然后是实际的目标接收到事件。
			//最后一个阶段是冒泡阶段，可以在这个阶段对事件做出响应。
			//单击<div>元素会按照p347图13-3所示顺序触发事件
			
			//在DOM事件流中，实际的目标(div元素)在捕获阶段不会接收到事件。
			//这意味着在补货阶段，事件从document到<html>再到<body>后就停止了。
			//下一个阶段是"处于目标"阶段，于是事件在<div>上发生，并在事件处理(后面将会讨论这个概念)中被看成冒泡阶段的一部分。
			//然后，冒泡阶段发生，事件又传播回文档。
			
			//多数支持DOM事件流的浏览器都实现了一种特定的行为；即使"DOM2级事件"规范明确要求补货阶段不会涉及事件目标
			//但IE9、Safari、Chrome、Firefox和Opera9.5及更高版本都会在捕获阶段触发事件对象上的事件。
			//结果，就是有两个机会在目标对象上面操作事件
			
			//IE9、Opera、Firefox、Chrome和Safari都支持DOM事件流;IE8及更早版本不支持DOM事件流
			
		</script>
	</body>
</html>
